FROM tensorflow/tensorflow:latest-jupyter

USER root
COPY ./requirements_gpunode.txt ./requirements.txt
RUN apt-get update
RUN apt-get install -y build-essential python3.8 python3.8-venv python3-pip net-tools git

RUN git clone https://github.com/wt358/CoOps_team2.git
RUN mv ./CoOps_team2/airflow/airflow-DAGS/pyfile/*.py ./

ENV VIRTUAL_ENV=/opt/venv
RUN python3 -m venv $VIRTUAL_ENV
ENV PATH="$VIRTUAL_ENV/bin:$PATH"

# install your pip package
RUN pip install -r requirements.txt
